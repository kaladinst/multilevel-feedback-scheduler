CC = gcc

CFLAGS = -Wall -Wextra -g -DPROJ_MAC_OS \
		-I ./src \
		-I ./FreeRTOS/include \
		-I ./FreeRTOS/portable/ThirdParty/GCC/Posix

LDFLAGS = -pthread;

VPATH = src:FreeRTOS/source:FreeRTOS/portable/ThirdParty/GCC/Posix:FreeRTOS/portable/MemMang

MY_SOURCES = main.c scheduler.c tasks.CC

RTOS_SOURCES = tasks.c list.c queue.c timers.c event_groups.c stream_buffer.c

PORT_SOURCES = heap_3.c port.c 

SOURCE_FILES = $(MY_SOURCES) $(RTOS_SOURCES) $(PORT_SOURCES)

OBJ_FILES = $(SOURCE_FILES:.c = .o)


TARGET = freertos_sim


all:$(TARGET)

$(TARGET): $(OBJ_FILES)
			$(CC) $(OBJ_FILES) -o $(TARGET) $(LDFLAGS)

%.o: %.c 
		$(CC) $(CFLAGS) -c $< -o $@

clean:
		rm -f *.o $(TARGET)
